모든 출처: 이스트소프트 백엔드 개발자 오르미 5기

# 리눅스

## 리눅스 기본 제어 명령어

### sort

- 파일 내용 정렬 명령어 (ASCII 문자 순으로 오름차순 정렬)
- `sort [옵션]... [파일]...`
- 옵션
    - `-r` 내림차순 정렬
    - `-n` 숫자로 정렬
    - `-k` 지정한 필드 기준으로 정렬
    - `-t` 필드 구분자 지정
    - `-u` 중복된 라인 제거
- **예시: 특정 필드로 정렬** `-k`

  파일명: names.txt

    ```
    Lee 30
    Kim 25
    Park 27
    Choi 29
    ```

  명령어: `sort -k 2 -n names.txt`

  결과 (나이 순으로 정렬):

    ```
    Kim 25
    Park 27
    Choi 29
    Lee 30
    ```


### grep

- 텍스트 패턴 검색 명령어
- `grep [options] pattern [file...]`
    - 여러 파일에서 단어 검색 한번에 가능
    - 파이프(`|`)와 함께 종종 사용됨 → 한 명령의 출력을 다른 명령의 입력으로 전달
- 옵션
    - `-i` 대소문자 무시
    - `-r / -R` 디렉토리 및 하위 디렉토리 재귀적으로 검색
    - `-v` 패턴과 일치하지 않는 줄 출력
    - `-i` 패턴과 일치하는 줄이 있는 파일 이름만 출력
    - `-n` 패턴과 일치하는 줄과 함꼐 해당 줄 번호 출력

### find

- 파일 시스템에서 파일을 찾기 위해 사용하는 명령어
- `find [경로...] [표현식]`
- 표현식
    - `-name [파일명]` 지정된 이름의 파일명 찾기
    - `-iname [파일명]` `name`과 유사, 대소문자를 구분 안함
    - `-type [d/f]` `d`는 디렉토리, `f`는 일반 파일 찾기
    - `-mtime [일수]` 지정된 일수만큼 이전에 수정된 파일을 찾기
    - `-exec [명령...] {} \;` 검색 결과에 대해 지정된 명령을 실행,  `{}`는 검색 결과를 의미

### touch

- 파일 생성 및 파일의 타임스탬프 변경 명령어
- `touch [옵션] 파일명`
    - 여러 개의 파일 동시 생성 가능
- 옵션
    - `-t [[CC]YY]MMDDhhmm[.ss]` 특정 시간으로 타임스탬프 변경

### which

- 특정한 실행 가능 파일의 경로 찾는 명령어 (파일이 없으면 어떠한 출력도 보여주지 않음)
- `which [명령어]`

### whereis

- 특정 바이너리, 소스, 또는 메뉴얼 페이지 파일의 위치 찾는 명령어
- `whereis [옵션] [파일명]`
- 옵션
    - `-b` 바이너리 파일만
    - `-m` 메뉴얼 파일만
    - `-s` 소스 파일만
    - `-u` 언급한 위치에서 파일을 못 찾은 경우 사용

### 와일드 카드

`*` 모든 문자 대체

`?` 한 문자만 대체

`[ ]` 대괄호 안의 어떤 문자와도 일치하는지 확인

## 리눅스 추가 명령어

### 표준 입력과 표준 출력

- 표준 입력
    - 프로그램에 데이터를 제공하는 방법
    - 보통 키보드에서 입력하는 데이터를 의미
    - 터미널에서 명령어를 입력하면, 그 명령어는 표준 입력을 통해 프로그램에 전달됨
- 표준 출력
    - 프로그램이 결과를 출력하는 방법
    - 모니터에 표시되는 데이터를 의미
    - 터미널에서 ‘ls’ 명령어를 입력하면, 그 결과는 표준 출력을 통해 화면에 표시됨
- 표준 오류 출력
    - 프로그램이 오류 메시지나 진단을 출력하는 표준적인 방법
    - 모니터에 표시되는 데이터를 의미
    - 표준 출력과 다르게, 표준 오류 출력은 프로그램의 주요 결과가 아닌 오류 메시지나 진단 정보를 출력하는 데 사용됨

### 리다이렉트

- 표준 입력, 표준 출력, 표준 오류의 데이터 흐름을 조절하는데 사용됨
- 출력 결과를 파일에 저장하거나, 파일로부터 입력을 받는 등의 작업을 수행할 수 있음
    - `>` : 명령의 출력을 파일에 저장 (이미 파일이 있으면 기존 내용 삭제)  `ls > file.txt`
    - `>>` : 명령의 출력을 파일에 저장 (기존 파일 마지막 줄에 추가)  `ls >> file.txt`
    - `<` : 표준 입력을 파일로부터 받기 `sort < file.txt`
    - `2>` : 명령의 에러 메시지를 파일에 저장 `ls /nonexistent_directory 2> error.txt`
- 다른 예시
    - 파일 내용 출력 `cat file.txt`
    - 여러 파일 내용 합치기 `cat file1.txt file2.txt > combined.txt`
    - 새로운 파일 생성 및 텍스트 작성 `cat > newfile.txt`
    - 파일 내용 추가 입력  `cat >> file.txt`

### 파이프

- 한 프로세스의 출력을 다른 프로세스의 입력으로 연결하는 방식
- `|` 기호를 사용하고, 프로그램을 조합하여 복잡한 작업을 수행하도록 도와주며 각각의 프로그램들을 서로 연결하여 효율적으로 작업을 수행할 수 있게 됨
- 예시
    - 출력된 결과 중 원하는 문자열이 포함된 결과 찾기
      `ls -l | grep "Jun"`
    - 출력된 결과 중 특정 프로세스 찾기
      `ps aux | grep python`
    - 특정 파일의 개수 세기
      `find . -name “*.txt” | wc -l`
    - 파일 내용 정렬하고 중복 라인 제거하기
      `cat file.txt | sort | uniq`

### 링크

**하드 링크**
: 원본 파일과 동일한 노드를 가리키는 파일, 파일 시스템 내에서 데이터 블록 공유, 원본 파일이 삭제되더라도 데이터에 계속 엑세스 가능
`ln 원본파일 링크파일`

**심볼릭 링크(소프트 링크)**
: 원본 파일을 가리키는 별도의 파일, 바로가기 같은 느낌으로 원본 파일이 삭제되면 심볼릭 링크는 더 이상 유효하지 않음
`ln -s 원본파일 링크파일`

→ 만약 원본 파일이 없으면 하드 링크는 생성되지 않고, 심볼릭 링크는 **끊어진** 링크가 됨

![link.jpeg](https://prod-files-secure.s3.us-west-2.amazonaws.com/e8f11927-b70c-4524-9227-a3efac08e7aa/73369c11-6761-44b7-a4f4-8eee58b8bbb3/link.jpeg)

### 권한

- 파일이나 디렉토리에 대한 사용자나 그룹의 액세스 권한을 제어 가능 → 파일을 읽을 수 있는 권한 `r` / 파일에 쓸 수 있는 권한 `w` / 파일을 실행할 수 있는 권한 `x`
- `소유자`: 파일 또는 디렉토리의 소유자는 파일을 생성한 사용자이며 파일에 대한 모든 권한을 가질 수 있음
- `그룹`: 파일 또는 디렉토리는 하나의 그룹을 가질 수 있으며, 이 그룹에 속한 사용자들은 그룹 권한에 따라 파일에 접근 가능
- `기타 사용자`: 소유자나 그룹에 속하지 않은 다른 모든 사용자들을 가리킴, 부여된 권한에 따라 파일에 접근 가능
- 권한 확인 `ls -l`
- 첫번째 문자
    - `-` 일반파일
    - `d` 디렉토리
    - `l` 심볼릭링크
    - `b` 블록 스페셜 파일
    - `c` 문자 스페셜 파일
    - `p` 파이프
    - `s` 소켓
- 권한 위치: 2~4번째 문자 = 소유자 / 5~7번째 문자 = 그룹 / 8~10번째 문자 = 기타 사용자
- 권한 문자
    - `-` 해당 권한 없음
    - `r` 읽기
    - `w` 쓰기
    - `x` 실행
- 권한 설정 `chmod`
    - 심볼릭 모드
        - 연산자 : + 권한 추가 / - 권한 삭제 / = 권한 설정
        - 소유자: u 소유자 / g 그룹 / o 기타 사용자 / a 모든 사용자
        - 권한: r 읽기 / w 쓰기 / x 실행
        - 예시: `chmod g+w filename` , `chmod a-r filename`
    - 숫자 모드
        - `0` 권한 없음
        - `1` 실행
        - `2` 쓰기
        - `3` 쓰기, 실행
        - `4` 읽기
        - `5` 읽기, 실행
        - `6` 읽기, 쓰기
        - `7` 읽기, 쓰기, 실행

### 쉘스크립트

- 리눅스 운영 체제에서 자동화 작업을 수행하기 위한 스크립트 언어
- 일련의 명령을 실행하는 데 사용하며, 일반적으로 쉘 환경에서 실행되고 Bash 등의 다양한 쉘에서 사용할 수 있음
- 텍스트 파일로 작성되며, 이 파일에는 실행할 쉘 명령이 포함됨
- 스크립트는 텍스트 에디터로 작성하고, 이후에는 실행 권한을 부여하여 실행 파일로 만들 수 있음
- 실행 방법

```bash
// 쉘 스크립트 작성하고 저장
#!/bin/bash
echo "Hello, world!"

// 파일에 실행 권한 추가
chmod +x hello_world.sh

// 실행
./hello_world.sh
```

- 실행 예시

```bash
// 조건문 사용한 예제
#!/bin/bash
echo "파일을 입력하세요:"
read file
if [ -e $file ]; then
  echo "$file 이(가) 존재합니다."
else
  echo "$file 이(가) 존재하지 않습니다."
fi

// 현재 시간과 날짜 출력
#!/bin/bash
echo "현재 날짜와 시간은:"
date

// 반복문을 사용한 예제
#!/bin/bash
for i in 1 2 3 4 5
do
  echo "반복 횟수: $i"
done
```

### 멀티 태스트와 프로세스 제어

- 태스크
  : 작업의 가장 기본적인 단위, 일반적으로 사용자가 시스템에게 명령을 내릴 때 생성되며, 이는 파일을 복사하거나 텍스트를  편집하는 것과 같은 일반적인 작업을 포함
  태스크는 시스템에 의해 추적되며, 시스템은 각 태스크에 대해 CPU 시간, 메모리 사용량 등의 리소스 사용을 관리함
  - 프로세스
  :

## 리눅스 시스템 관리

## 파일 시간대 변경

### timedatectl

- 시간대 확인 명령어
- 서울 기준 시간대로 변경: `sudo timedatectl set-timezone Asia/Seoul`

# Lightsail 인스턴스 내 SpringBoot 실행

Lightdsail 내 인스턴스를 만들고 SSH를 사용하여 연결 버튼 클릭 → 키-값 저장하기(원격 접속하여 실행 시 필요) → 원격 접속

## 환경 셋팅

```bash
// git 설치를 위한 명령어 다운로드
sudo apt update
sudo apt install git -y

// git 환경 연결
git config --global user.name [username]
git config --global user.email [email]

// git 불러오기
git clone [git 주소]

// Azul Zulu 저장소 추가(java)
sudo apt install gnupg ca-certificates curl
curl -s https://repos.azul.com/azul-repo.key | sudo gpg --dearmor -o /usr/share/keyrings/azul.gpg
echo "deb [signed-by=/usr/share/keyrings/azul.gpg] https://repos.azul.com/zulu/deb stable main" | sudo tee /etc/apt/sources.list.d/zulu.list

// 시스템 업데이트
sudo apt update && sudo apt upgrade -y

// JDK 설치
sudp apt install zulu17-jdk

// 설치 확인
java -version
```

## Springboot 실행

```bash
// 빌드를 위한 그레이들 실행 권한 설정
chmod +x gradlew

// 빌드 실행
./gradlew build -Pprofile=dev

// 해당 위치로 이동
cd build/libs

// 스프링 실행
java -jar [내 거 jar 파일].jar --spring.profiles.active=dev

// 프로세스를 백그라운드에서 실행하고, 터미널 세션이 종료되어도 계속 실행되도록 하기
nohup java -jar [내 거 jar 파일].jar --spring.profiles.active=dev > output.log 2>&1 &

// 실행 확인
ps -ef
```

## 접속하기

1. lightsail > 네트워킹 > IPv4 방화벽에 포트번호 등록
2. http://{lightsail에 만들어둔 인스턴스의 공용 IP 주소}:{포트번호}/{엔드포인트}